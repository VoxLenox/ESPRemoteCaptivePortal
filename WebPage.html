<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Remote Captive Portal Manager</title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			#login-container {
				display: none;
				justify-content: center;
				align-items: center;
				height: 100vh;
			}

			#login-form {
				width: 300px;
				padding: 20px;
				background-color: rgb(240, 240, 240);
				border-radius: 5px;
				display: flex;
				flex-direction: column;
				align-items: stretch;
				box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.15);
			}

			.login-form-title {
				color: rgb(60, 60, 60);
				text-align: center;
				margin-bottom: 5px;
			}

			.login-bar {
				width: 50%;
				border: 1px solid rgb(200, 200, 200);
				border-radius: 1px;
				margin: 0 auto;
				margin-bottom: 10px;
			}

			#login-password {
				width: 100%;
				padding: 10px;
				box-sizing: border-box;
				border: 1px solid rgb(100, 100, 100);
				border-radius: 5px;
			}

			#login-error {
				display: none;
				color: rgb(255, 50, 50);
				font-family: Arial, Helvetica, sans-serif;
				font-size: small;
				margin-top: 2px;
				margin-bottom: -3px;
			}

			.login-save-label {
				display: flex;
				align-items: center;
				font-size: small;
				margin-top: 5px;
			}

			#login-save-checkbox {
				margin-right: 5px;
			}

			#login-button {
				width: 100%;
				padding: 10px;
				margin-top: 5px;
				box-sizing: border-box;
				background-color: #4CAF50;
				color: white;
				border: none;
				border-radius: 5px;
			}

			@media (max-width: 500px) {
				.login-form {
					width: 80%;
				}
			}
		</style>
	</head>
	<body>
		<div id="login-container">
			<form id="login-form">
				<h2 class="login-form-title">LOGIN</h2>
				<hr class="login-bar" />
				<input type="password" placeholder="Enter password" id="login-password" required />
				<p id="login-error">An unexpected error has occurred, please try again</p>
				<label class="login-save-label">
					<input type="checkbox" id="login-save-checkbox" />
					Save password
				</label>
				<button id="login-button" type="submit">Login</button>
			</form>
		</div>
		<script>
			const originUrl = location.origin;

			const loginContainer = document.getElementById("login-container");
			const passwordInput = document.getElementById("login-password");
			const loginErrorText = document.getElementById("login-error");
			const savePasswordCheckbox = document.getElementById("login-save-checkbox");

			document.getElementById("login-form").addEventListener("submit", submitEvent => {
				submitEvent.preventDefault();
				const password = passwordInput.checked;
				const savePassword = savePasswordCheckbox.value;
				fetch(`${originUrl}/api`).then(response => {
					
				}).catch(err => {
					
				});
			});

			const savedLoginPassword = sessionStorage.getItem("savedPassword") ?? localStorage.getItem("savedPassword");
			if (savedLoginPassword != null)
				fetch(`${originUrl}/api`).then(response => {
					
				}).catch(err => {
					
				});
			else
				loginContainer.style.display = "flex";
		</script>
	</body>
</html>